{"code":"!function(e){var n={};function t(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var s in e)t.d(o,s,function(n){return e[n]}.bind(null,s));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=\"\",t(t.s=0)}([function(e,n,t){\"use strict\";t.r(n);var o={};t.r(o),t.d(o,\"ajaxFunctions\",function(){return a});var s,i,c,r,a={sendGetRequest:function(e,n){const t=generateURL(e);return $.ajax({url:t,type:\"GET\",data:n,contentType:\"application/json; charset=utf-8\",dataType:\"json\"})},sendPostRequest:function(e,n){const t=generateURL(e);return $.ajax({url:t,type:\"POST\",data:JSON.stringify({payload:n}),contentType:\"application/json; charset=utf-8\",dataType:\"json\"})},generateURL:function(e){return protocol+serverURL+e}},l=[],u=[];location.protocol,location.host;var d=[{id:\"#seed-button\",container:\"#seed-inputs-wrapper\",cliked:!1},{id:\"#kmeans-button\",container:\"#kmeans-inputs-wrapper\",cliked:!1},{id:\"#fuzzy-button\",container:\"#fuzzy-inputs-wrapper\",cliked:!1}];function f(e,n){$(e).css({\"background-color\":\"#20a5d6\"}),$(n).css({display:\"none\"}),d.forEach(n=>{n.id==e&&(n.cliked=!1)})}function p(e){$(\"#dicom-images-carousel\").carousel();for(let n=1;n<=e;n++)$(`.item${n}`).click(function(){$(\"#dicom-images-carousel\").carousel(n-1)});$(\".carousel-control-prev\").click(function(){$(\"#dicom-images-carousel\").carousel(\"prev\")}),$(\".carousel-control-next\").click(function(){$(\"#dicom-images-carousel\").carousel(\"next\")})}$(document).ready(function(){console.log(o),$(\"#processing-button\").click(()=>{if(\"rgb(33, 165, 34)\"==$(\"#seed-button\").css(\"background-color\")){const e=$(\"input[type=radio][name=seed]:checked\").val(),n=$(\"input[type=radio][name='neighbours']:checked\").val(),t=$(\"input[type=number][name='seed']\").val(),o=\"/seed\"+`?fileName=${s}&ratio=${t}&neighboursNumber=${n}&distance=${e}`;sendPostRequest(o,l).done(function(e){$(\"#spinner\").html(\"<p>processing finished</p>\");const n=cv.matFromArray(512,512,cv.CV_8U,[].concat.apply([],e.result));cv.imshow(\"canvasOutput\",n)}).fail(function(e){console.log(e)})}}),$(\"#processing-button\").click(()=>{if(\"rgb(33, 165, 34)\"==$(\"#kmeans-button\").css(\"background-color\")){const e=$(\"input[type=number][name='kmeans']\").val();sendGetRequest(\"/kmeans/step1\",{fileName:s,clustersNumber:e}).done(function(n){c=n.arrayOfImgs,n.arrayOfImgs.forEach((e,n)=>{const t=cv.matFromArray(512,512,cv.CV_8U,[].concat.apply([],e));let o,s;0===n?(o=`\\n              <div class='carousel-item active'\" + \">\\n                      <div class=\"slide-name\" style='color:white;font-size:20px'>Cluster number: ${n+1}</div> \\n                      <canvas id='canvas${n}'></canvas>\\n              </div>`,s=`<li class='item${n+1} active'\" + \"></li>`):(o=`\\n              <div class='carousel-item'\" + \">\\n                      <div class=\"slide-name\" style='color:white;font-size:20px'>Cluster number: ${n+1}</div>\\n                      <canvas id='canvas${n}'></canvas>\\n              </div>`,s=`<li class='item${n+1}'\" + \"></li>`),$(\".carousel-inner\").append(o),$(\".carousel-indicators\").append(s),$(\".carousel-item\").css({width:\"100%\",height:\"600px\"}),cv.imshow(`canvas${n}`,t)}),p(e),$(\"#dicomImgModal\").modal()}).fail(function(e){console.log(e)})}}),$(\".carousel-submit-button\").click(()=>{if(\"step2\"===$(\".carousel-input\").attr(\"name\")){const e=$(\".filters-list\").find(\"li\").filter(function(){return\"rgb(208, 156, 0)\"===$(this).css(\"background-color\")}).index();sendGetRequest(\"/kmeans/step2\",{filterNumber:e+1,imgNumber:r-1,reconstructionCoords:u}).done(function(e){console.log(e)}).fail(function(e){console.log(e)})}else{r=$(\".carousel-input\").val();const e=cv.matFromArray(512,512,cv.CV_8U,[].concat.apply([],c[r-1]));let n,t;$(\".modal-title\").text(\"Step 2: select further processing filter number\"),$(\".processing-filters\").css({display:\"inherit\",color:\"white\"}),$(\".carousel-input\").attr(\"name\",\"step2\"),n=\"\\n      <div class='carousel-item active'\\\" + \\\">\\n              <div class=\\\"slide-name\\\" style='color:white;font-size:20px'>Choosen image for further processing</div> \\n              <canvas id='canvas1'></canvas>\\n      </div>\",t=\"<li class='item1 active'\\\" + \\\"></li>\",$(\".carousel-inner\").html(n),$(\".carousel-indicators\").html(t),$(\".carousel-item\").css({width:\"100%\",height:\"600px\"}),cv.imshow(\"canvas1\",e),p(1),$(\"#dicomImgModal\").modal()}}),$(\".filters-list li\").click(function(){$(this).css({\"background-color\":\"#d09c00\"});for(let e=0;e<5;e++)$(this).index()!==e&&\"rgb(68, 66, 66)\"!==$(`.filters-list li:nth-child(${e+1})`).css(\"background-color\")&&$(`.filters-list li:nth-child(${e+1})`).css({\"background-color\":\"rgb(68, 66, 66)\"});switch($(this).index()){case 0:$(\".reconstruction-pts\").removeClass(\"d-none\"),$(\".reconstruction-pts\").addClass(\"d-flex\"),$(\"#canvas1\").css({cursor:\"crosshair\"})}}),$(\".carousel-inner\").delegate(\"#canvas1\",\"click\",function(e){console.log(\"canvas1\"),$(\".reconstruction-no-points\").remove(),u.push({x:e.offsetX,y:e.offsetY}),$(\"#reconstruction-points-container\").append(`<li>x: ${e.offsetX} y: ${e.offsetY}</li>`)}),$(\"#processing-button\").click(()=>{if(\"rgb(33, 165, 34)\"==$(\"#fuzzy-button\").css(\"background-color\")){const e=$(\"input[type=number][name='fuzzy']\").val();sendGetRequest(\"/fuzzy\",{fileName:s,clustersNumber:e}).done(function(e){$(\"#spinner\").html(\"<p>processing finished</p>\"),console.log(e.result);let n=cv.matFromArray(1,8,cv.CV_8UC1,e.result);console.log(n.data),cv.imshow(\"canvasOutput\",n)}).fail(function(e){console.log(e)})}}),$('input[type=\"file\"]').change(function(e){s=e.target.files[0].name,$('input[type=\"file\"]')&&$(\"#buttons-wrapper\").css(\"visibility\",\"visible\")}),d.forEach(e=>{$(e.id).click(function(){if(e.cliked)f(e.id,e.container);else{!function(e,n){$(e).css({\"background-color\":\"#21a522\"}),$(n).css({display:\"inherit\"}),d.forEach(n=>{n.id==e&&(n.cliked=!0)})}(e.id,e.container);const n=d.find(n=>1==n.cliked&&n.id!=e.id);n&&f(n.id,n.container)}})}),$(\".cornerstone-canvas\").click(function(e){$(\"#seed-list-item\").length||$(\"#no-seeds\").remove(),l.push({x:e.offsetX,y:e.offsetY}),i=$(`<li id=\"seed-list-item\">X: ${e.offsetX} Y: ${e.offsetY}</li>`),$(\"#seed-list\").append(i)})})}]);","extractedComments":[]}